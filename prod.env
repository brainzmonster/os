# =========================
# brainzOS â€“ prod.env (hardened)
# =========================

# ---- Model ----
MODEL_NAME=tiiuae/falcon-rw-1b
# Optional: control tokenizer threads to avoid fork-safety warnings
TOKENIZERS_PARALLELISM=false
# Optional: Hugging Face cache dir (persistent volume in Docker)
HF_HOME=/var/cache/huggingface

# ---- Runtime / API ----
DEBUG=false
API_PREFIX=/api
# MUST set via secret manager / CI, not in repo
SECRET_KEY=CHANGE_ME_AT_RUNTIME

# CORS: keep tight in prod
CORS_ALLOWED_ORIGINS=https://brainz.app,https://app.brainz.monster
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,OPTIONS
CORS_ALLOW_HEADERS=Authorization,Content-Type,X-API-Key

# Rate limit (if your middleware supports it)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=60/min

# ---- Server / Workers (used by your entry scripts) ----
UVICORN_HOST=0.0.0.0
UVICORN_PORT=8000
UVICORN_LOG_LEVEL=info
# Gunicorn-style hints (read by your container entrypoint if implemented)
WORKERS=2
WORKER_CLASS=uvicorn.workers.UvicornWorker
TIMEOUT=60
KEEP_ALIVE=75

# ---- Database ----
# Use SSL + strong creds in prod
DATABASE_URL=postgresql://brainz:${DB_PASSWORD}@db:5432/brainz_db?sslmode=require
DB_ECHO=false
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_PRE_PING=true

# ---- Frontend (for links / redirects) ----
FRONTEND_URL=https://brainz.app

# ---- Memory / Retrieval (matches your code paths, safe defaults) ----
MEMORY_ENABLED=true
MEMORY_SEARCH_TOP_K=5
MEMORY_SIMILARITY_THRESHOLD=0.82
MEMORY_MODEL=all-MiniLM-L6-v2

# ---- Training knobs (used by trainer if you read them from settings) ----
TRAINING_EPOCHS=1
TRAINING_BATCH_SIZE=2
LEARNING_RATE=5e-5
TRAIN_ON_CPU=false

# ---- Logging / Observability ----
LOG_LEVEL=INFO
JSON_LOGS=true
# Optional external error tracking endpoint; leave empty if unused
SENTRY_DSN=

# ---- Security headers (if your middleware/proxy reads these) ----
SECURE_COOKIES=true
HSTS_ENABLED=true

# ---- Misc ----
ENVIRONMENT=production
